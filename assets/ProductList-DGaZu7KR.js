import{u as C,_ as A}from"./EditProductSheet-CoBdVx4D.js";import{i as P,j as S,f as j,c as d,b as t,h as $,k as z,u as x,F as b,l as D,r as m,o as c,n as f,t as i,m as h}from"./index-DKYVYWGX.js";const E={class:"p-4 pb-24 space-y-4 bg-slate-50 min-h-screen"},N={key:0,class:"text-center py-20 text-slate-400"},V={class:"space-y-0.5 max-w-[70%]"},B={class:"font-bold text-slate-800 truncate leading-tight"},M={class:"text-[10px] text-slate-400 font-medium tracking-wide uppercase"},T={class:"text-xs font-semibold text-slate-500 pt-1"},F={class:"text-slate-400 font-normal"},L={class:"text-emerald-600 font-bold"},R={class:"flex gap-2 mt-2"},O=["onClick","disabled"],q=["onClick"],G={class:"absolute right-0 top-0 bottom-0 z-10 flex h-full"},H=["onClick"],I=["onClick"],U={__name:"ProductList",setup(J){const n=C(),p=P(),a=S(),r=m(null),l=m(!1);j(()=>{n.fetchProducts()});function _(e){e._showActions===void 0&&(e._showActions=!1),n.items.forEach(s=>{s.product_id!==e.product_id&&(s._showActions=!1)}),e._showActions=!e._showActions}function g(){r.value=null,l.value=!0}function v(e){if(e.stock<=0){a.error("Out of stock");return}p.add(e),a.success("Added to cart")}function w(e){e._showActions=!1,r.value=e,l.value=!0}function k(e){confirm(`Delete ${e.name}?`)&&(e._showActions=!1,n.deleteProduct(e.product_id),a.success("Product deleted"))}function y(e){r.value?(n.updateProduct(e),a.success("Product updated")):(n.addProduct(e),a.success("Product added")),l.value=!1}return(e,s)=>(c(),d(b,null,[t("div",E,[t("div",{class:"flex justify-between items-center"},[s[2]||(s[2]=t("h2",{class:"text-xl font-bold text-slate-800 tracking-tight"},"Products",-1)),t("button",{class:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800 text-white shadow-sm active:scale-90 transition-all",onClick:g},[...s[1]||(s[1]=[t("span",{class:"text-xl"},"+",-1)])])]),x(n).loading?(c(),d("div",N,[...s[3]||(s[3]=[t("div",{class:"animate-spin inline-block w-8 h-8 border-4 border-slate-300 border-t-slate-800 rounded-full mb-4"},null,-1),t("p",{class:"font-bold text-sm"},"Synchronizing Products...",-1)])])):z("",!0),(c(!0),d(b,null,D(x(n).items,o=>(c(),d("div",{key:o.product_id,class:"bg-white rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden h-28 flex"},[t("div",{class:f(["absolute inset-0 z-20 bg-white p-4 flex justify-between items-center transition-transform duration-300 ease-in-out",o._showActions?"-translate-x-32":"translate-x-0"])},[t("div",V,[t("h3",B,i(o.name),1),t("p",M,i(o.sku),1),t("div",T,[s[4]||(s[4]=h(" Cost: ",-1)),t("span",F,"RM "+i(o.cost_price),1),s[5]||(s[5]=h(" Â· Sell: ",-1)),t("span",L,"RM "+i(o.sell_price),1)]),t("div",R,[t("span",{class:f(["text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm border",o.stock>0?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"])}," Stock: "+i(o.stock),3),t("button",{onClick:u=>v(o),disabled:o.stock<=0,class:"text-[10px] font-bold px-3 py-1 rounded-lg bg-amber-400 text-amber-900 shadow-sm active:scale-95 disabled:opacity-50 disabled:grayscale transition-all"}," ðŸ›’ Add to Cart ",8,O)])]),t("button",{onClick:u=>_(o),class:"w-10 h-10 flex items-center justify-center bg-transparent border-none text-blue-500 active:scale-90 transition-all outline-none"},[t("i",{class:f(["fa text-xl transition-transform duration-300",o._showActions?"fa-chevron-right":"fa-chevron-left"]),"aria-hidden":"true"},null,2)],8,q)],2),t("div",G,[t("button",{class:"w-16 bg-sky-500 text-white flex flex-col items-center justify-center gap-1 active:bg-sky-600 transition-colors",onClick:u=>w(o)},[...s[6]||(s[6]=[t("span",{class:"text-lg"},"âœï¸",-1),t("span",{class:"text-[9px] font-bold uppercase"},"Edit",-1)])],8,H),t("button",{class:"w-16 bg-rose-400 text-white flex flex-col items-center justify-center gap-1 active:bg-rose-500 transition-colors",onClick:u=>k(o)},[...s[7]||(s[7]=[t("span",{class:"text-lg"},"ðŸ—‘",-1),t("span",{class:"text-[9px] font-bold uppercase tracking-tighter"},"Delete",-1)])],8,I)])]))),128))]),$(A,{open:l.value,product:r.value,onClose:s[0]||(s[0]=o=>l.value=!1),onSave:y},null,8,["open","product"])],64))}};export{U as default};
