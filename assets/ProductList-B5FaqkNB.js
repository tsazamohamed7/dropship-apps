import{u as A}from"./product.store-DpFMZ5aC.js";import{w as j,i as V,c as b,j as P,o as x,b as e,t as c,k as f,v as p,l as M,m as E,p as U,f as z,h as D,u as w,F as h,q as N,r as y,n as k,s as C}from"./index-BpMlzn1i.js";const B={class:"flex justify-between items-center border-b pb-2"},O={class:"text-lg font-bold text-slate-800"},R={class:"space-y-4"},T={class:"flex flex-col gap-1"},F={class:"grid grid-cols-2 gap-4"},L={class:"flex flex-col gap-1"},q={class:"flex flex-col gap-1"},K={class:"grid grid-cols-2 gap-4"},W={class:"flex flex-col gap-1"},G={class:"flex flex-col gap-1"},H={__name:"EditProductSheet",props:{open:Boolean,product:Object},emits:["close","save"],setup(m,{emit:i}){const u=m,r=i,l=V({product_id:"",name:"",sku:"",sell_price:0,cost_price:0,stock:0});j(()=>u.open,g=>{g&&(u.product?Object.assign(l,u.product):Object.assign(l,{product_id:"",name:"",sku:"",sell_price:0,cost_price:0,stock:0}))});function d(){r("close")}function v(){r("save",{...l})}return(g,t)=>m.open?(x(),b("div",{key:0,class:"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm",onClick:d},[e("div",{class:"absolute bottom-0 w-full bg-white rounded-t-3xl p-5 pb-24 space-y-4 shadow-2xl",onClick:t[5]||(t[5]=M(()=>{},["stop"]))},[e("div",B,[e("h3",O,c(m.product?"Edit Product":"Add Product"),1)]),e("div",R,[e("div",T,[t[6]||(t[6]=e("label",{class:"text-xs font-bold text-slate-500 uppercase ml-1"},"Product Name",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>l.name=a),class:"w-full border border-slate-200 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Mineral Water"},null,512),[[p,l.name]])]),e("div",F,[e("div",L,[t[7]||(t[7]=e("label",{class:"text-xs font-bold text-slate-500 uppercase ml-1"},"Sale Price (RM)",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.sell_price=a),type:"number",class:"w-full border border-slate-200 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 outline-none"},null,512),[[p,l.sell_price,void 0,{number:!0}]])]),e("div",q,[t[8]||(t[8]=e("label",{class:"text-xs font-bold text-slate-500 uppercase ml-1"},"Cost Price (RM)",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>l.cost_price=a),type:"number",class:"w-full border border-slate-200 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 outline-none"},null,512),[[p,l.cost_price,void 0,{number:!0}]])])]),e("div",K,[e("div",W,[t[9]||(t[9]=e("label",{class:"text-xs font-bold text-slate-500 uppercase ml-1"},"Current Stock",-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.stock=a),type:"number",class:"w-full border border-slate-200 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 outline-none"},null,512),[[p,l.stock,void 0,{number:!0}]])]),e("div",G,[t[10]||(t[10]=e("label",{class:"text-xs font-bold text-slate-500 uppercase ml-1"},"Source (SKU)",-1)),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.sku=a),class:"w-full border border-slate-200 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"sku code"},null,512),[[p,l.sku]])])])]),e("div",{class:"flex gap-3 pt-4"},[e("button",{class:"flex-1 bg-slate-100 text-slate-600 font-bold rounded-xl py-3 active:scale-95 transition-all",onClick:d}," Cancel "),e("button",{class:"flex-1 bg-slate-800 text-white font-bold rounded-xl py-3 shadow-lg active:scale-95 transition-all",onClick:v}," Save Changes ")])])])):P("",!0)}},I={class:"p-4 pb-24 space-y-4 bg-slate-50 min-h-screen"},J={key:0,class:"text-center py-20 text-slate-400"},Q={class:"space-y-0.5 max-w-[70%]"},X={class:"font-bold text-slate-800 truncate leading-tight"},Y={class:"text-[10px] text-slate-400 font-medium tracking-wide uppercase"},Z={class:"text-xs font-semibold text-slate-500 pt-1"},ee={class:"text-slate-400 font-normal"},te={class:"text-emerald-600 font-bold"},se={class:"flex gap-2 mt-2"},oe=["onClick","disabled"],le=["onClick"],ne={class:"absolute right-0 top-0 bottom-0 z-10 flex h-full"},ae=["onClick"],ie=["onClick"],ce={__name:"ProductList",setup(m){const i=A(),u=E(),r=U(),l=y(null),d=y(!1);z(()=>{i.fetchProducts()});function v(s){s._showActions===void 0&&(s._showActions=!1),i.items.forEach(o=>{o.product_id!==s.product_id&&(o._showActions=!1)}),s._showActions=!s._showActions}function g(){l.value=null,d.value=!0}function t(s){if(s.stock<=0){r.error("Out of stock");return}u.add(s),r.success("Added to cart")}function a(s){s._showActions=!1,l.value=s,d.value=!0}function S(s){confirm(`Delete ${s.name}?`)&&(s._showActions=!1,i.deleteProduct(s.product_id),r.success("Product deleted"))}function $(s){l.value?(i.updateProduct(s),r.success("Product updated")):(i.addProduct(s),r.success("Product added")),d.value=!1}return(s,o)=>(x(),b(h,null,[e("div",I,[e("div",{class:"flex justify-between items-center"},[o[2]||(o[2]=e("h2",{class:"text-xl font-bold text-slate-800 tracking-tight"},"Products",-1)),e("button",{class:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800 text-white shadow-sm active:scale-90 transition-all",onClick:g},[...o[1]||(o[1]=[e("span",{class:"text-xl"},"+",-1)])])]),w(i).loading?(x(),b("div",J,[...o[3]||(o[3]=[e("div",{class:"animate-spin inline-block w-8 h-8 border-4 border-slate-300 border-t-slate-800 rounded-full mb-4"},null,-1),e("p",{class:"font-bold text-sm"},"Synchronizing Products...",-1)])])):P("",!0),(x(!0),b(h,null,N(w(i).items,n=>(x(),b("div",{key:n.product_id,class:"bg-white rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden h-28 flex"},[e("div",{class:k(["absolute inset-0 z-20 bg-white p-4 flex justify-between items-center transition-transform duration-300 ease-in-out",n._showActions?"-translate-x-32":"translate-x-0"])},[e("div",Q,[e("h3",X,c(n.name),1),e("p",Y,c(n.sku),1),e("div",Z,[o[4]||(o[4]=C(" Cost: ",-1)),e("span",ee,"RM "+c(n.cost_price),1),o[5]||(o[5]=C(" Â· Sell: ",-1)),e("span",te,"RM "+c(n.sell_price),1)]),e("div",se,[e("span",{class:k(["text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm border",n.stock>0?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"])}," Stock: "+c(n.stock),3),e("button",{onClick:_=>t(n),disabled:n.stock<=0,class:"text-[10px] font-bold px-3 py-1 rounded-lg bg-amber-400 text-amber-900 shadow-sm active:scale-95 disabled:opacity-50 disabled:grayscale transition-all"}," ðŸ›’ Add to Cart ",8,oe)])]),e("button",{onClick:_=>v(n),class:"w-10 h-10 flex items-center justify-center bg-transparent border-none text-blue-500 active:scale-90 transition-all outline-none"},[e("i",{class:k(["fa text-xl transition-transform duration-300",n._showActions?"fa-chevron-right":"fa-chevron-left"]),"aria-hidden":"true"},null,2)],8,le)],2),e("div",ne,[e("button",{class:"w-16 bg-sky-500 text-white flex flex-col items-center justify-center gap-1 active:bg-sky-600 transition-colors",onClick:_=>a(n)},[...o[6]||(o[6]=[e("span",{class:"text-lg"},"âœï¸",-1),e("span",{class:"text-[9px] font-bold uppercase"},"Edit",-1)])],8,ae),e("button",{class:"w-16 bg-rose-400 text-white flex flex-col items-center justify-center gap-1 active:bg-rose-500 transition-colors",onClick:_=>S(n)},[...o[7]||(o[7]=[e("span",{class:"text-lg"},"ðŸ—‘",-1),e("span",{class:"text-[9px] font-bold uppercase tracking-tighter"},"Delete",-1)])],8,ie)])]))),128))]),D(H,{open:d.value,product:l.value,onClose:o[0]||(o[0]=n=>d.value=!1),onSave:$},null,8,["open","product"])],64))}};export{ce as default};
