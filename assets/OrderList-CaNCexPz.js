import{_ as N,y as L,f as P,c as l,b as a,l as o,F as p,s as x,e as _,u as I,o as r,n as c,r as O,x as G,t as i,z as V}from"./index-Cow1QG0L.js";const $={class:"p-4 pb-20 space-y-3 bg-slate-50 min-h-screen font-sans"},j={class:"flex gap-2 text-xs font-bold overflow-x-auto pb-2 no-scrollbar"},z=["onClick"],U={key:0,class:"text-center py-10 text-slate-400"},M={class:"space-y-1"},R={class:"font-bold text-slate-800 leading-tight truncate w-40"},S={class:"text-sm font-medium text-slate-500"},T={class:"flex gap-1.5 mt-2"},B=["onClick"],F={class:"absolute right-0 top-0 bottom-0 z-10 flex h-full bg-slate-50"},X=["onClick"],q=["onClick"],H=["onClick"],J={__name:"OrderList",setup(K){const n=L(),u=O("ALL");P(async()=>{await n.fetchOrders()});function y(t){const s=t.payment_status==="UNPAID",e=t.delivery_status==="PENDING"&&t.payment_status!=="CANCELLED";return s||e}function g(t){let s=0;return t.payment_status==="UNPAID"&&s++,t.delivery_status==="PENDING"&&t.payment_status!=="CANCELLED"&&s++,t.payment_status==="UNPAID"&&t.delivery_status==="PENDING"&&s++,s*64}function h(t){n.items.forEach(s=>{s.order_id!==t.order_id&&(s._showActions=!1)}),t._showActions=!t._showActions}const v=_(()=>{let t=n.items;switch(t.forEach(s=>{s._showActions===void 0&&(s._showActions=!1)}),u.value){case"PENDING":return t.filter(m);case"COMPLETED":return t.filter(b);case"CANCELLED":return t.filter(f);default:return t}}),k=_(()=>[{key:"ALL",label:"All",count:n.items.length,badge:"bg-slate-200 text-slate-700"},{key:"PENDING",label:"Pending",count:n.items.filter(m).length,badge:"bg-amber-100 text-amber-700"},{key:"COMPLETED",label:"Completed",count:n.items.filter(b).length,badge:"bg-emerald-100 text-emerald-700"},{key:"CANCELLED",label:"Cancelled",count:n.items.filter(f).length,badge:"bg-red-100 text-red-700"}]);function w(t){t._showActions=!1,n.markPaid(t)}function E(t){t._showActions=!1,n.markDelivered(t)}function C(t){confirm("Cancel this order?")&&(t._showActions=!1,n.cancel(t))}function D(t){return t==="PAID"?"bg-emerald-500 text-white":"bg-amber-100 text-amber-700"}function A(t){return t==="DELIVERED"?"bg-sky-500 text-white":"bg-slate-100 text-slate-500"}function f(t){return t.payment_status==="CANCELLED"||t.delivery_status==="CANCELLED"}function b(t){return t.payment_status==="PAID"&&t.delivery_status==="DELIVERED"}function m(t){return!f(t)&&!b(t)}return(t,s)=>(r(),l("div",$,[s[4]||(s[4]=a("h2",{class:"text-lg font-semibold text-slate-800"},"Orders",-1)),a("div",j,[(r(!0),l(p,null,x(k.value,e=>(r(),l("button",{key:e.key,onClick:d=>u.value=e.key,class:c(["px-4 py-2 rounded-xl border flex items-center gap-2 transition-all whitespace-nowrap",u.value===e.key?"bg-slate-800 text-white border-slate-800 shadow-md":"bg-white text-slate-600 border-slate-200"])},[G(i(e.label)+" ",1),a("span",{class:c(["px-2 py-0.5 rounded-full text-[10px]",e.badge])},i(e.count),3)],10,z))),128))]),I(n).loading?(r(),l("div",U,[...s[0]||(s[0]=[a("div",{class:"animate-spin inline-block w-6 h-6 border-2 border-current border-t-transparent rounded-full mb-2"},null,-1),a("p",null,"Loading orders...",-1)])])):o("",!0),(r(!0),l(p,null,x(v.value,e=>(r(),l("div",{key:e.order_id,class:"bg-white rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden h-28 flex mb-3"},[a("div",{class:"absolute inset-0 z-20 bg-white p-4 flex justify-between items-center transition-transform duration-300 ease-in-out",style:V({transform:e._showActions?`translateX(-${g(e)}px)`:"translateX(0)"})},[a("div",M,[a("div",R,i(e.customer_name),1),a("div",S," RM "+i(Number(e.total_amount).toFixed(2)),1),a("div",T,[a("span",{class:c(["text-[9px] uppercase tracking-widest font-black px-2 py-1 rounded-md shadow-sm",D(e.payment_status)])},i(e.payment_status),3),a("span",{class:c(["text-[9px] uppercase tracking-widest font-black px-2 py-1 rounded-md shadow-sm",A(e.delivery_status)])},i(e.delivery_status),3)])]),y(e)?(r(),l("button",{key:0,onClick:d=>h(e),class:"w-10 h-10 flex items-center justify-center bg-transparent border-none text-blue-500 active:scale-90 transition-all outline-none mr-2"},[a("i",{class:c(["fa text-xl transition-transform duration-300",e._showActions?"fa-chevron-right":"fa-chevron-left"]),"aria-hidden":"true"},null,2)],8,B)):o("",!0)],4),a("div",F,[e.payment_status==="UNPAID"?(r(),l("button",{key:0,class:"w-16 bg-emerald-500 text-white flex flex-col items-center justify-center gap-1 active:bg-emerald-600 transition-colors",onClick:d=>w(e)},[...s[1]||(s[1]=[a("span",{class:"text-base"},"üíµ",-1),a("span",{class:"text-[9px] font-bold"},"PAID",-1)])],8,X)):o("",!0),e.delivery_status==="PENDING"&&e.payment_status!=="CANCELLED"?(r(),l("button",{key:1,class:"w-16 bg-sky-500 text-white flex flex-col items-center justify-center gap-1 active:bg-sky-600 transition-colors",onClick:d=>E(e)},[...s[2]||(s[2]=[a("span",{class:"text-base"},"üöö",-1),a("span",{class:"text-[9px] font-bold"},"DELIVERED",-1)])],8,q)):o("",!0),e.payment_status==="UNPAID"&&e.delivery_status==="PENDING"?(r(),l("button",{key:2,class:"w-16 bg-rose-400 text-white flex flex-col items-center justify-center gap-1 active:bg-rose-500 transition-colors",onClick:d=>C(e)},[...s[3]||(s[3]=[a("span",{class:"text-base"},"‚ùå",-1),a("span",{class:"text-[9px] font-bold"},"CANCEL",-1)])],8,H)):o("",!0)])]))),128))]))}},W=N(J,[["__scopeId","data-v-0d245a20"]]);export{W as default};
