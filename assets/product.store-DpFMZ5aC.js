import{z as c,a as i,d as u,p as a}from"./index-BpMlzn1i.js";const s={getAll(t="ACTIVE"){return i({resource:"product",status:t})},getById(t){return i({resource:"product",id:t})},getSimpleList(){return i({resource:"product",method:"LIST_SIMPLE"})},create(t){return c({resource:"product",method:"POST",...t})},update(t){return c(t)},delete(t){return c({resource:"product",method:"DELETE",product_id:t})}},l=u("product",{state:()=>({items:[],simpleItems:[],loading:!1,error:null}),actions:{async fetchProducts(t="ACTIVE"){this.loading=!0,this.error=null;try{const e=await s.getAll(t);this.items=e.data||[]}catch(e){this.error=e.message||"Failed to load products"}finally{this.loading=!1}},async fetchSimpleProducts(){if(!this.simpleItems.length)try{const t=await s.getSimpleList();this.simpleItems=t.data||[]}catch(t){console.error("Failed to fetch simple products",t)}},async addProduct(t){a().info("Adding product..."),await s.create(t),await this.fetchProducts()},async updateProduct(t){const e=a(),o=this.items.findIndex(r=>r.product_id===t.product_id);if(o===-1)return;const d={...this.items[o]};this.items[o]={...t};try{const r={resource:"product",method:"PUT",product_id:t.product_id,name:t.name,sku:t.sku,sell_price:t.sell_price,cost_price:t.cost_price,stock:t.stock,status:t.status};await s.update(r),e.success("Product updated")}catch(r){this.items[o]=d,console.error("Update product failed",r),e.error("Failed to update product")}},async deleteProduct(t){await s.delete(t),await this.fetchProducts()}}});export{l as u};
